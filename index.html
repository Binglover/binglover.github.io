
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Plumet Tournament</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            text-align: center;
            position: relative;
            animation: gradientAnimation 10s ease infinite;
            background: linear-gradient(135deg, #1d2671, #c33764);
            background-size: 400% 400%; /* Increase size for smooth transition */
        }

        /* Background Gradient Animation */
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        header {
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 3.5em;
            margin: 0;
            opacity: 0; /* Start invisible for animation */
            transform: translateY(-50px); /* Start above the original position */
            animation: titleReveal 1s forwards; /* Animation for title reveal */
        }

        @keyframes titleReveal {
            0% {
                opacity: 0;
                transform: translateY(-50px);
            }
            50% {
                transform: translateY(20px) scale(1.1);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes shimmer {
            0% {
                text-shadow: 0 0 5px rgba(255, 204, 0, 0.5), 0 0 10px rgba(255, 204, 0, 0.5);
            }
            50% {
                text-shadow: 0 0 20px rgba(255, 204, 0, 1), 0 0 30px rgba(255, 204, 0, 1);
            }
            100% {
                text-shadow: 0 0 5px rgba(255, 204, 0, 0.5), 0 0 10px rgba(255, 204, 0, 0.5);
            }
        }

        .gold-title {
            background: linear-gradient(90deg, #ffcc00, #ffd700, #ffcc00); /* Gold gradient */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 1.5s infinite; /* Shimmer effect */
        }

        .rarity-text {
            font-size: 1.5em;
            color: #ffcc00; /* Gold color */
            margin-top: 10px;
            opacity: 0; /* Start invisible for animation */
            transform: translateY(10px); /* Start slightly below the original position */
            animation: rarityReveal 1s forwards; /* Animation for rarity reveal */
            display: none; /* Start hidden */
        }

        @keyframes rarityReveal {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        p {
            font-size: 1.5em;
            color: #eee;
            margin: 10px 0 20px;
        }

        .game-container {
            width: 100%;
            max-width: 960px;
            height: auto;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            background-color: rgba(100, 143, 98, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s;
            z-index: 1;
        }

        .game-container:hover {
            transform: scale(1.03);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.8);
        }

        .game-container object {
            width: 100%;
            height: 100%;
        }

        footer {
            margin-top: 30px;
            font-size: 0.9em;
            color: #ddd;
            position: relative;
            z-index: 1;
        }

        footer p {
            margin: 5px 0;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            h1 {
                font-size: 2.5em;
            }

            .rarity-text {
                font-size: 1.2em;
            }

            p {
                font-size: 1.2em;
            }
        }
    </style>
    <!-- Ruffle Script for Flash Emulation -->
    <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>

    <header>
        <h1 id="title">Plumet Tournament</h1>
        <div id="rarity" class="rarity-text">YOU GOT THE GOLD SKIN!</div> <!-- Rarity text -->
        <p>Aim for the highest score!</p>
          <title>Six-digit Password Panel Demo</title>
  <style>
    :root{--bg:#0f1724;--panel:#0b1220;--accent:#7c3aed;--muted:#94a3b8;--glass: rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#071129 0%, #071833 100%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}

    /* Icon button */
    .icon-btn{background:var(--accent);border:0;border-radius:10px;padding:12px;display:inline-grid;place-items:center;width:56px;height:56px;cursor:pointer;box-shadow:0 6px 18px rgba(20,20,60,0.6);transition:transform .12s ease}
    .icon-btn:active{transform:translateY(1px) scale(.995)}
    .icon-btn svg{width:26px;height:26px;display:block}

    /* Panel / modal */
    .backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;padding:24px}
    .backdrop.show{display:flex}
    .panel{width:min(460px,96vw);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:20px;box-shadow:0 10px 40px rgba(2,6,23,0.7);border:1px solid rgba(255,255,255,0.03)}
    .panel h2{margin:0 0 8px;font-size:20px}
    .panel p{margin:0 0 16px;color:var(--muted);font-size:14px}

    .pin-input{display:flex;gap:8px;justify-content:center;margin:14px 0}
    .pin-input input{width:44px;height:56px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:22px;text-align:center;outline:none}
    .controls{display:flex;gap:10px;justify-content:flex-end;margin-top:8px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:inherit;cursor:pointer}
    .btn.primary{background:var(--accent);border-color:transparent}
    .error{color:#ffb4b4;font-size:13px;text-align:center;margin-top:8px;min-height:18px}

    /* small screens: stack */
    @media (max-width:420px){.pin-input input{width:40px;height:48px;font-size:20px}}
  </style>
</head>
<body>
  <div style="text-align:center;max-width:680px">
    <h1 style="margin-bottom:8px">Demo: Icon that opens a 6-digit password panel</h1>
    <p style="color:var(--muted);margin-bottom:16px">Click the purple icon to open the panel. The code below is keyboard- and screen-reader-friendly.</p>

    <!-- Icon button -->
    <button id="openBtn" class="icon-btn" aria-haspopup="dialog" aria-controls="passwordPanel" title="Open password panel">
      <!-- lock icon -->
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 15a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" fill="white" opacity="0.95" />
        <rect x="4" y="10" width="16" height="10" rx="2" fill="white" opacity="0.12" />
        <path d="M7 10V8a5 5 0 0 1 10 0v2" stroke="white" stroke-opacity="0.9" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- Backdrop + Panel -->
  <div id="backdrop" class="backdrop" role="presentation">
    <div id="passwordPanel" class="panel" role="dialog" aria-modal="true" aria-labelledby="panelTitle">
      <h2 id="panelTitle">Enter six-digit password</h2>
      <p id="panelDesc">Please type the six-digit numeric password. Use the keyboard or your device's number pad.</p>

      <!-- We use six inputs to make digit-by-digit entry easy and accessible -->
      <form id="pinForm" autocomplete="off" onsubmit="return false;">
        <div class="pin-input" aria-hidden="false">
          <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 1" class="pin-digit" />
          <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 2" class="pin-digit" />
          <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 3" class="pin-digit" />
          <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 4" class="pin-digit" />
          <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 5" class="pin-digit" />
          <input inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 6" class="pin-digit" />
        </div>

        <div class="error" id="error" aria-live="polite"></div>

        <div class="controls">
          <button type="button" id="cancelBtn" class="btn">Cancel</button>
          <button type="button" id="submitBtn" class="btn primary">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Elements
    const openBtn = document.getElementById('openBtn');
    const backdrop = document.getElementById('backdrop');
    const panel = document.getElementById('passwordPanel');
    const cancelBtn = document.getElementById('cancelBtn');
    const submitBtn = document.getElementById('submitBtn');
    const digits = Array.from(document.querySelectorAll('.pin-digit'));
    const errorEl = document.getElementById('error');

    // Open panel
    openBtn.addEventListener('click', () => {
      backdrop.classList.add('show');
      // clear inputs
      digits.forEach(i => i.value = '');
      errorEl.textContent = '';
      // focus first digit
      setTimeout(() => digits[0].focus(), 50);
      // trap focus (simple)
      document.addEventListener('keydown', handleKeyDown);
    });

    function closePanel(){
      backdrop.classList.remove('show');
      openBtn.focus();
      document.removeEventListener('keydown', handleKeyDown);
    }

    cancelBtn.addEventListener('click', closePanel);

    // Click outside to close
    backdrop.addEventListener('mousedown', (e) => {
      if(e.target === backdrop) closePanel();
    });

    // Keyboard handling for digits: auto-advance, backspace, paste support
    digits.forEach((input, idx) => {
      input.addEventListener('input', (e) => {
        const val = e.target.value.replace(/[^0-9]/g, '');
        e.target.value = val;
        if(val && idx < digits.length - 1) digits[idx+1].focus();
      });

      input.addEventListener('keydown', (e) => {
        if(e.key === 'Backspace' && !e.target.value && idx > 0){
          digits[idx-1].focus();
        }
        if(e.key === 'Enter') {
          attemptSubmit();
        }
        // prevent non-digit keys (allow arrows/tab)
        if(e.key.length === 1 && /[^0-9]/.test(e.key)){
          e.preventDefault();
        }
      });

      // support paste of 6-digit string
      input.addEventListener('paste', (e) => {
        e.preventDefault();
        const text = (e.clipboardData || window.clipboardData).getData('text').replace(/\D/g,'').slice(0,6);
        for(let i=0;i<digits.length;i++) digits[i].value = text[i] || '';
        // focus next empty or last
        const firstEmpty = digits.find(d => !d.value);
        (firstEmpty || digits[digits.length-1]).focus();
      });
    });

    // Submit
    submitBtn.addEventListener('click', attemptSubmit);

    function handleKeyDown(e){
      if(e.key === 'Escape') closePanel();
      // keep focus inside panel
      if(e.key === 'Tab' && backdrop.classList.contains('show')){
        const focusables = [...panel.querySelectorAll('button, input')];
        const idx = focusables.indexOf(document.activeElement);
        if(e.shiftKey && idx === 0){ focusables[focusables.length-1].focus(); e.preventDefault(); }
        if(!e.shiftKey && idx === focusables.length-1){ focusables[0].focus(); e.preventDefault(); }
      }
    }

    function attemptSubmit(){
      const value = digits.map(d => d.value).join('');
      if(value.length !== 6){
        errorEl.textContent = 'Please enter all six digits.';
        // shake animation (quick CSS-free approach)
        panel.animate([{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:200,iterations:1});
        return;
      }

      // At this point `value` contains the 6-digit password the user entered.
      // --- TODO: Replace the following with your real password-checking logic. ---
      // Example: call a function `checkPassword(value)` you will implement later that returns true/false.

      // Placeholder: we simply show success and close. Replace as needed.
      // Example: if(checkPassword(value)) { /* success */ } else { /* error */ }

      // For demo show console and close
      console.log('Entered password:', value);
      // Clear and close after a small delay so user sees any visual confirmation if you add one
      setTimeout(closePanel, 150);
    }

    // Expose a function for other scripts to set the real password checker.
    // You can replace `window.checkPassword` with your server call or local check.
    window.checkPassword = async function(pin){
      // Example: compare to a hard-coded password (DO NOT store secrets in client code for production)
      // return pin === '123456';
      // Or, do an authenticated POST to your server and return the validation result.
      throw new Error('No checkPassword implementation provided. Replace window.checkPassword with your validation logic.');
    };

    // If you want submit to call the provided checkPassword and show a friendly error:
    async function attemptSubmitWithValidation(){
      const value = digits.map(d => d.value).join('');
      if(value.length !== 6){ errorEl.textContent = 'Please enter all six digits.'; return; }
      errorEl.textContent = 'Checking...';
      try{
        const ok = await window.checkPassword(value);
        if(ok){ errorEl.textContent = 'Password accepted.'; setTimeout(closePanel, 350); }
        else{ errorEl.textContent = 'Incorrect password.'; }
      }catch(err){ errorEl.textContent = 'Validation not configured.'; console.error(err); }
    }

    // If you prefer the submit button to use the sample validated flow, comment/uncomment below:
    //submitBtn.addEventListener('click', attemptSubmitWithValidation);

  </script>
    </header>

    <div class="game-container" id="game-container">
        <!-- Embed Flash game using Ruffle -->
        <object id="game-object" data="Plumet2.swf" type="application/x-shockwave-flash">
            <param name="movie" value="Plumet2.swf" />
            <embed src="Plumet2.swf" type="application/x-shockwave-flash"></embed>
        </object>
    </div>

    <footer>
        <p>Plumet Tournament | Hosted by Luke</p>
        <p> Leaderboard<br>1. Jared Aarre 1904<br>2. Luke Loiselle 1901<br>3. Oliver Grogg 1769<br>4. Ethan Roisland 1717<br>5. Nick Gillard 1707
        </p>
    </footer>

    <script>
        // Randomly change title color on load
        const titleElement = document.getElementById('title');
        const rarityElement = document.getElementById('rarity');
        const randomChance = Math.floor(Math.random() * 50); // Random number between 0 and 49

        // Trigger reveal animation
        function revealTitle(isGold) {
            if (isGold) {
                titleElement.classList.add('gold-title'); // Apply gold title class
                titleElement.innerText = 'GOLDEN Plumet Tournament'; // Change text for gold title
                rarityElement.style.display = 'block'; // Show rarity
                rarityElement.style.opacity = 1; // Make rarity visible
                rarityElement.style.transform = 'translateY(0)'; // Move to original position
            } else {
                rarityElement.style.display = 'none'; // Hide rarity
                rarityElement.style.opacity = 0; // Keep rarity invisible
                rarityElement.style.transform = 'translateY(10px)'; // Keep below original position
            }
            titleElement.style.opacity = 1; // Make title visible
            titleElement.style.transform = 'translateY(0)'; // Move to original position
        }

        // Decide if the title should be gold
        if (randomChance === 0) { // 1 in 50 chance
            setTimeout(() => revealTitle(true), 1000); // Show gold title after 1 second
        } else {
            setTimeout(() => revealTitle(false), 1000); // Show normal title after 1 second
        }

        function resizeGame() {
            const container = document.getElementById('game-container');
            const width = container.offsetWidth;
            const height = (width / 16) * 9;  // Maintain 16:9 aspect ratio
            container.style.height = height + 'px';
        }

        window.addEventListener('resize', resizeGame);
        window.addEventListener('load', () => {
            resizeGame();
        });
    </script>
</body>
</html>
